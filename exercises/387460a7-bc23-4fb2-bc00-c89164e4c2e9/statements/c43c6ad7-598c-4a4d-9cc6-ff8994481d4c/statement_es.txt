<p>&iquest;Qu&eacute; ocurre si combinamos dos o m&aacute;s tablas sin ninguna restricci&oacute;n? Por ejemplo,&nbsp;<code>regions</code> con <code>countries</code> del esquema <code>HR</code>. Esto lo podemos hacer poniendo ambas tablas en la cl&aacute;usula FROM y separadas por comas.</p><blockquote><p><code>SELECT *<br />FROM regions, countries;</code></p></blockquote><p>El <strong>producto cartesiano</strong> entre dos tablas da como resultado todas las combinaciones de todas las filas de esas dos tablas.</p><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">REGION_ID</th><th style="background-color:#9e9e9e; text-align:center">REGION_NAME</th><th style="background-color:#9e9e9e; text-align:center">COUNTRY_ID</th><th style="background-color:#9e9e9e; text-align:center">COUNTRY_NAME</th><th style="background-color:#9e9e9e; text-align:center">REGION_ID</th></tr><tr><td>1</td><td>Europe</td><td>AR</td><td>Argentina</td><td>2</td></tr><tr><td>1</td><td>Europe</td><td>AU</td><td>Australia</td><td>3</td></tr><tr><td>1</td><td>Europe</td><td>BE</td><td>Belgium</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>BR</td><td>Brazil</td><td>2</td></tr><tr><td>1</td><td>Europe</td><td>CA</td><td>Canada</td><td>2</td></tr><tr><td>1</td><td>Europe</td><td>CH</td><td>Switzerland</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>CN</td><td>China</td><td>3</td></tr><tr><td>1</td><td>Europe</td><td>DE</td><td>Germany</td><td>1</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>Esta operaci&oacute;n no es de las m&aacute;s utilizadas ya que coge una fila de una tabla (<code>regions</code>) y la asocia con todos y cada uno de las filas de la otra tabla (<code>countries</code>), independientemente de que tengan relaci&oacute;n o no. Por eso, nos aparece &#39;<strong>Europe</strong>&#39; asociado con &#39;<strong>Argentina</strong>&#39; o con &#39;<strong>Australia</strong>&#39;.</p><p>Lo m&aacute;s normal es que queramos seleccionar los registros seg&uacute;n alg&uacute;n criterio.</p><p>Necesitaremos <strong>discriminar</strong> de alguna forma para que &uacute;nicamente aparezcan las filas de una tabla que est&eacute;n relacionadas con filas la otra tabla. A esto se le llama <strong>asociar tablas</strong> (<code>JOIN</code>).</p><p>Para hacer una composici&oacute;n interna se parte de un producto cartesiano y se eliminan aquellas filas que no cumplen la condici&oacute;n de composici&oacute;n.</p><p>Lo importante en las composiciones internas es emparejar los campos que se refieren a las mismas propiedades,<em> aunque tengan nombres diferentes</em>.</p><p>En nuestro caso, para conseguir la composici&oacute;n interna entre <code>regions&nbsp;</code>y <code>countries&nbsp;</code>tendremos que discriminar a trav&eacute;s del atributo <code>REGION_ID</code> de ambas tablas.</p><blockquote><p><code>SELECT *<br />FROM regions, countries<br /><strong>WHERE regions.REGION_ID = countries.REGION_ID</strong>;</code></p></blockquote><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">REGION_ID</th><th style="background-color:#9e9e9e; text-align:center">REGION_NAME</th><th style="background-color:#9e9e9e; text-align:center">COUNTRY_ID</th><th style="background-color:#9e9e9e; text-align:center">COUNTRY_NAME</th><th style="background-color:#9e9e9e; text-align:center">REGION_ID</th></tr><tr><td>1</td><td>Europe</td><td>NL</td><td>Netherlands</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>FR</td><td>France</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>UK</td><td>United Kingdom</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>DK</td><td>Denmark</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>BE</td><td>Belgium</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>CH</td><td>Switzerland</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>IT</td><td>Italy</td><td>1</td></tr><tr><td>1</td><td>Europe</td><td>DE</td><td>Germany</td><td>1</td></tr><tr><td>2</td><td>Americas</td><td>US</td><td>United States of America</td><td>2</td></tr></tbody></table><p>Podemos observar ahora que <code>&#39;Europe&#39;</code> ya solo est&aacute; asociado a pa&iacute;ses de Europa porque el valor de <code>REGION_ID</code> en ambas tablas coincide.</p><p>Las reglas para las composiciones son:</p><ul><li>Pueden combinarse tantas tablas como se desee.</li><li>El criterio de combinaci&oacute;n puede estar formado por m&aacute;s de una pareja de columnas.</li><li>En la cl&aacute;usula <code>SELECT</code> pueden citarse columnas de ambas tablas, condicionen o no, la combinaci&oacute;n.</li><li>Si hay columnas con el mismo nombre en las distintas tablas, deben identificarse especificando la tabla de procedencia o utilizando un alias de tabla.</li></ul><p>Las columnas que aparecen en la cl&aacute;usula <code>WHERE</code> se denominan <strong>columnas de emparejamiento</strong> ya que son las que permiten emparejar las filas de las dos tablas. &Eacute;stas no tienen por qu&eacute; estar incluidas en la lista de selecci&oacute;n. Emparejaremos tablas que est&eacute;n relacionadas entres s&iacute; y adem&aacute;s, una de las columnas de emparejamiento ser&aacute; clave principal en su tabla. Cuando emparejamos campos debemos especificar de la siguiente forma: <code>NombreTabla1. Camporelacionado1 = NombreTabla2.Camporelacionado2</code>.</p><h3>Ejercicio:</h3><p>Muestra los datos de los empleados junto con los datos del departamento en el que trabajan.</p><p>Ordena el resultado alfab&eacute;ticamente por los&nbsp;apellidos de los empleados.</p><p><small><em>No te preocupes si, en la soluci&oacute;n que se muestra, algunos atributos aparecen desplazados. De momento, utiliza un <code>*</code> en el <code>SELECT</code>.</em></small> y utiliza la cláusula <code>FETCH FIRST 5 ROWS ONLY</code> al final de la sentencia para que el número de filas del resultado sea manejable</p>
<p><small><em>No debes tener en cuenta el formato de la fecha esperada ya que el juez muestra la fecha con ese formato por defecto.</em></small></p>