<p>Klausulen <code>HAVING</code> gör det möjligt att fastställa kriterier för de resulterande raderna efter tillämpningen av en <code>GROUP BY</code>.</p><h3>Syntax:</h3><p>Klausulen <code>HAVING</code> Vi sätter den <code>inmediatamente después del GROUP BY</code>, eftersom deras kriterier kommer att gälla på raderna som genereras av grupperingen.</p><blockquote><p><code>SELECT columna1, columna2, ...<br/>FROM tabla1, tabla2, ...<br/>WHERE condición1, condición2, …<br/><strong>GROUP BY columna1, columna2, …<br/>HAVING condición1, condición2, …</strong><br/>ORDER BY ordenación;</code></p></blockquote><p>Det är mycket viktigt att förstå att vi från och med nu har två platser där urvalskriterier kan fastställas:</p><ul><li><code>WHERE</code>Dina kriterier utvärderas före gruppering.</li><li><code>HAVING</code>Dina kriterier utvärderas efter gruppering.</li></ul><h3>Exempel:</h3><p>I ett tidigare exempel såg vi hur man visar den genomsnittliga lönen för alla anställda på avdelningar. I stället för att använda alla avdelningar för att beräkna den genomsnittliga lönen använder vi endast de anställda vars arbete innehåller ordet. <em>CLERK</em>Från:</p><blockquote><p><code>SELECT DEPARTMENT_ID, ROUND(AVG(SALARY)) AS "AVERAGE SALARY"<br/>FROM employees<br/><strong>WHERE JOB_ID LIKE '%CLERK%'</strong><br/>GROUP BY DEPARTMENT_ID;</code></p></blockquote><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th><th style="background-color:#9e9e9e; text-align:center">AVERAGE SALARY</th></tr><tr><td style="text-align:center">50 50</td><td>3000</td></tr><tr><td style="text-align:center">30 30 30 30 30</td><td>2780</td></tr></tbody></table><p>Kriteriet att de anställdas arbete måste innehålla CLERK har vi varit tvungna att lägga den i klausulen. <code>WHERE</code>eftersom vi, efter grupperingen, inte längre har data <code>JOB_ID</code>.</p><p>I HAVING-klausulen kunde vi endast fastställa kriterier för de uppgifter som finns tillgängliga efter grupperingen, dvs. data i föregående tabell. Vi vill till exempel bara visa de avdelningar där de genomsnittliga lönerna för anställda som utför ett jobb som innehåller CLERK var mindre än 3000:</p><blockquote><p><code>SELECT DEPARTMENT_ID, ROUND(AVG(SALARY)) AS "AVERAGE SALARY"<br/>FROM employees<br/>WHERE JOB_ID LIKE '%CLERK%'<br/>GROUP BY DEPARTMENT_ID<br/><strong>HAVING AVG(SALARY) < 3000</strong>;</code></p></blockquote><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th><th style="background-color:#9e9e9e; text-align:center">AVERAGE SALARY</th></tr><tr><td style="text-align:center">30 30 30 30 30</td><td>2780</td></tr></tbody></table><h3>Övning:</h3><p>Visar lönen <em>Mínimo</em> och <em>MÁXIMO</em> anställda i var och en av de befintliga typerna av arbete.</p><p>Det utesluter från gruppen där MINE och MÁXIMO är lika.</p><p>Beställ resultatet alfabetiskt, i ordning ASCENDENTE, enligt typen av arbete.</p>