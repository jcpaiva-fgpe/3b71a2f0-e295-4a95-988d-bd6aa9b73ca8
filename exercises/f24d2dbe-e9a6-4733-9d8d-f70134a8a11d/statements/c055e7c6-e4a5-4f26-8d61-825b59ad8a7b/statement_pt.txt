<h3>Datas aritméticas.</h3>
<p>Antes de começar com as funções de datas, é importante entender que podemos fazer certas operações aritméticas com as datas.</p><p>Por exemplo, podemos aumentar ou diminuir uma data em vários dias (mesmo com frações de dias).</p><blockquote><p><code>SELECT<br/>    CURRENT_DATE -1 AS "YESTERDAY",<br/>    CURRENT_DATE AS "TODAY",<br/>    CURRENT_DATE + 1 AS "TOMORROW";</code></p></blockquote><table align="center" border="1" summary="Results from query 39"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">Sim</th><th style="background-color:#9e9e9e; text-align:center">ALEMANHA</th><th style="background-color:#9e9e9e; text-align:center">TOMORROW</th></tr><tr><td>2022-09-22</td><td>2022-09-23</td><td>2022-09-24</td></tr></tbody></table><blockquote><p><em><code>CURRENT_DATE</code>: Retorna a data atual.</em></p></blockquote><p>Mais tarde, podemos até subtrair 2 datas e saber o número de dias entre eles.</p><p>Mas além de dias, também podemos adicionar ou subtrair intervalos de tempo.</p><p>Por exemplo, podemos aumentar ou diminuir uma data em vários meses.</p><blockquote><p><code>SELECT<br/>    CURRENT_DATE - interval '1 month' AS "LAST MONTH",<br/>    CURRENT_DATE AS "TODAY",<br/>    CURRENT_DATE + interval '1 month' AS "NEXT MONTH";</code></p></blockquote><table align="center" border="1" summary="Results from query 39"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">Último mês</th><th style="background-color:#9e9e9e; text-align:center">ALEMANHA</th><th style="background-color:#9e9e9e; text-align:center">SEGUNDA PARTE</th></tr><tr><td>2022-08-23 00:00</td><td>2022-09-23</td><td>2022-10-23 00:00:00</td></tr></tbody></table><blockquote><p><em><code>CURRENT_DATE</code>: Retorna a data atual.</em></p></blockquote><p>Mais tarde, podemos até subtrair 2 datas e saber o número de dias entre eles.</p><h3>Funções de data</h3><p>Abaixo está uma tabela com algumas funções de datas, juntamente com o resultado que eles retornam.</p><table align="center" border="1" cellspacing="0" style="border-collapse:collapse; width:NaN"><tbody><tr><td style="background-color:#9e9e9e; border-color:#9e9e9e; border-style:solid; border-width:1px; text-align:center; vertical-align:top"><p><strong>Função</strong></p></td></tr></tbody></table><td style="background-color:#9e9e9e; border-color:#9e9e9e; border-style:solid; border-width:1px; text-align:center; vertical-align:top"><p><strong>Descrição</strong></p></td><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>AGE ( timestamp, timestamp ) → interval</strong></code></p></td></tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Retorna um resultado em anos, meses e dias, em vez de apenas dias.</p></td><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>DATE_TRUNC ( text, timestamp ) → timestamp</strong></code></p></td></tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Retorna a data truncada à precisão especificada.</p></td><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>EXTRACT ( field from timestamp ) → numeric<br/>EXTRACT ( field from interval ) → numeric</strong></code></p></td></tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Retorna o campo escolhido da data.</p></td><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>MAKE_DATE ( year int, month int, day int ) → date</strong></code></p></td></tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Criar uma data dos parâmetros do ano, mês e dia.</p></td><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>NOW()</strong></code></p></td></tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Retorna a data do sistema, levando em conta o fuso horário.</p></td><p>A lista completa de funções pode ser obtida a partir da documentação <a href="https://www.postgresql.org/docs/14/functions-datetime.html">Funções de data e hora em PostgreSQL</a>.</p><h3>Exemplo:</h3><p>Quem está envolvido na empresa há mais de 30 anos:<ol><li>Usamos a função <code>AGE</code> para conhecer <em>A idade '</em> da data de recrutamento (<code>HIRE_DATE</code>até o momento presente</li><li>desse resultado, temos anos com <code>EXTRACT</code></li><li>em comparação com o resultado de 30</li></ol></p><blockquote><p><code>SELECT FIRST_NAME, LAST_NAME, HIRE_DATE<br/>FROM employees<br/>WHERE EXTRACT(year from AGE(CURRENT_DATE, HIRE_DATE)) >= 30<br/>ORDER BY HIRE_DATE;</code></p></blockquote><table align="center" border="1" summary="Results from query "><tbody><tr><th style="background-color:#9e9e9e; text-align:center">FIRST_NAME</th><th style="background-color:#9e9e9e; text-align:center">LAST_NAME</th><th style="background-color:#9e9e9e; text-align:center">HIRE_DATE</th></tr><tr><td>Steven.</td><td>Rei.</td><td>1987-06-17 00:00:00</td></tr><tr><td>Jennifer.</td><td>Baleias</td><td>1987-09-17 00:00:00</td></tr><tr><td>Querida.</td><td>Kochhar</td><td>1989-09-21 00:00</td></tr><tr><td>Alexander</td><td>Hund</td><td>1990-01-03 00:00:00</td></tr><tr><td>Bruce.</td><td>Ernst</td><td>1991-05-21 00:00:00</td></tr></tbody></table><h3>Exercício:</h3><p>Com base no exemplo anterior, use a função <code>MAKE_DATE</code> para obter funcionários com mais de 30 anos, em 31 de dezembro de 2020.</p><p>Encomende o resultado alfabeticamente pelos <code>hire_date</code>.</p>