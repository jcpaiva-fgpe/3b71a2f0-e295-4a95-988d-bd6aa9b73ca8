<h3>Aritm&eacute;tica de fechas.</h3>
<p>Antes de comenzar con las funciones de fechas, es importante entender que podemos hacer ciertas operaciones aritm&eacute;ticas con las fechas.</p><p>Por ejemplo, podemos incrementar o decrementar una fecha en un n&uacute;mero de d&iacute;as (incluso con fracciones de d&iacute;as).</p><blockquote><p><code>SELECT<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE -1 AS &quot;YESTERDAY&quot;,<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE AS &quot;TODAY&quot;,<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE + 1 AS &quot;TOMORROW&quot;;</code></p></blockquote><table align="center" border="1" summary="Results from query 39"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">YESTERDAY</th><th style="background-color:#9e9e9e; text-align:center">TODAY</th><th style="background-color:#9e9e9e; text-align:center">TOMORROW</th></tr><tr><td>2022-09-22</td><td>2022-09-23</td><td>2022-09-24</td></tr></tbody></table><blockquote><p><em><code>CURRENT_DATE</code>: Devuelve la fecha actual.</em></p></blockquote><p>M&aacute;s adelante, podremos, incluso, restar 2 fechas y saber el n&uacute;mero de d&iacute;as transcurridos entre ellas.</p><p>Pero, además de días, también podemos sumar o restar intervalos de tiempo.</p><p>Por ejemplo, podemos incrementar o decrementar una fecha en un n&uacute;mero de meses.</p><blockquote><p><code>SELECT<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE - interval '1 month' AS &quot;LAST MONTH&quot;,<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE AS &quot;TODAY&quot;,<br />&nbsp;&nbsp;&nbsp; CURRENT_DATE + interval '1 month' AS &quot;NEXT MONTH&quot;;</code></p></blockquote><table align="center" border="1" summary="Results from query 39"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">LAST MONTH</th><th style="background-color:#9e9e9e; text-align:center">TODAY</th><th style="background-color:#9e9e9e; text-align:center">NEXT MONTH</th></tr><tr><td>2022-08-23 00:00:00</td><td>2022-09-23</td><td>2022-10-23 00:00:00</td></tr></tbody></table><blockquote><p><em><code>CURRENT_DATE</code>: Devuelve la fecha actual.</em></p></blockquote><p>M&aacute;s adelante, podremos, incluso, restar 2 fechas y saber el n&uacute;mero de d&iacute;as transcurridos entre ellas.</p><h3>Funciones de fecha</h3><p>A continuaci&oacute;n se muestran una tabla con algunas funciones de fechas, junto con el resultado que devuelven.</p><table align="center" border="1" cellspacing="0" style="border-collapse:collapse; width:NaN"><tbody><tr><td style="background-color:#9e9e9e; border-color:#9e9e9e; border-style:solid; border-width:1px; text-align:center; vertical-align:top"><p><strong>Funci&oacute;n</strong></p></td><td style="background-color:#9e9e9e; border-color:#9e9e9e; border-style:solid; border-width:1px; text-align:center; vertical-align:top"><p><strong>Descripci&oacute;n</strong></p></td></tr><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>AGE ( timestamp, timestamp ) → interval</strong></code></p></td><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Devuelve un resultado en años, meses y días, en lugar de solo días.</p></td></tr><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>DATE_TRUNC ( text, timestamp ) → timestamp</strong></code></p></td><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Devuelve la fecha truncada a la precisión especificada.</p></td></tr><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>EXTRACT ( field from timestamp ) → numeric<br/>EXTRACT ( field from interval ) → numeric</strong></code></p></td><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Devuelve el campo elegido de la fecha.</p></td></tr><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>MAKE_DATE ( year int, month int, day int ) → date</strong></code></p></td><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Crea una fecha a partir de los parámetros del año, mes y día.</p></td></tr><tr><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p><code><strong>NOW()</strong></code></p></td><td style="border-bottom:1px solid #9e9e9e; border-left:1px solid #9e9e9e; border-right:1px solid #9e9e9e; border-top:1px solid #9e9e9e; vertical-align:top"><p>Devuelve la fecha del sistema, teniendo en cuenta la zona horaria.</p></td></tr></tbody></table><p>La lista completa de funciones la pod&eacute;is obtener de la documentaci&oacute;n de <a href="https://www.postgresql.org/docs/14/functions-datetime.html">Funciones de fechas y hora en PostgreSQL</a>.</p><h3>Ejemplo:</h3><p>Qui&eacute;n lleva m&aacute;s de 30 a&ntilde;os contratado en la empresa:<ol><li>utilizamos la función <code>AGE</code> para conocer la <em>'edad'</em> transcurrida desde la fecha de contratación (<code>HIRE_DATE</code>) hasta el momento actual</li><li>de ese resultado, obtenemos los años con <code>EXTRACT</code></li><li>comparamos el resultado con 30</li></ol></p><blockquote><p><code>SELECT FIRST_NAME, LAST_NAME, HIRE_DATE<br />FROM employees<br />WHERE EXTRACT(year from AGE(CURRENT_DATE, HIRE_DATE)) >= 30<br />ORDER BY HIRE_DATE;</code></p></blockquote><table align="center" border="1" summary="Results from query "><tbody><tr><th style="background-color:#9e9e9e; text-align:center">FIRST_NAME</th><th style="background-color:#9e9e9e; text-align:center">LAST_NAME</th><th style="background-color:#9e9e9e; text-align:center">HIRE_DATE</th></tr><tr><td>Steven</td><td>King</td><td>1987-06-17 00:00:00</td></tr><tr><td>Jennifer</td><td>Whalen</td><td>1987-09-17 00:00:00</td></tr><tr><td>Neena</td><td>Kochhar</td><td>1989-09-21 00:00:00</td></tr><tr><td>Alexander</td><td>Hunold</td><td>1990-01-03 00:00:00</td></tr><tr><td>Bruce</td><td>Ernst</td><td>1991-05-21 00:00:00</td></tr></tbody></table><h3>Ejercicio:</h3><p>Partiendo del ejemplo anterior, utiliza la función <code>MAKE_DATE</code> para obtener los empleados que ten&iacute;an m&aacute;s de 30 a&ntilde;os de antig&uuml;edad, el 31 de diciembre de 2020.</p><p>Ordena el resultado alfab&eacute;ticamente por la fecha de contrataci&oacute;n.</p>
<p><small><em>No debes tener en cuenta el formato de la fecha esperada ya que el juez muestra la fecha con ese formato por defecto.</em></small></p>