<p>Las subconsultas puede aparecer dentro de las cl&aacute;usulas <code>WHERE</code>, <code>HAVING</code> o <code>FROM</code>.</p><p>Comenzaremos por las</p><h2>Subconsultas en la cl&aacute;usula <code>WHERE</code> que devuelven valores &uacute;nicos.</h2><h3>Sintaxis</h3><blockquote><p><code>SELECT [<em>atributos</em>]<br />FROM [<em>tabla</em>]<br />WHERE expresi&oacute;n operador <strong>(<br />&nbsp;&nbsp;&nbsp; SELECT [<em>atributos</em>]<br />&nbsp;&nbsp;&nbsp; FROM [<em>tabla</em>]<br />&nbsp;&nbsp;&nbsp; WHERE [condici&oacute;n]</code><br />)</strong></p></blockquote><p>Lo que hemos puesto en negrita corresponder&iacute;a a la subconsulta.</p><h3>Ejemplo:</h3><p>Si pregunt&aacute;ramos, <em>&iquest;qu&eacute; empleados trabajan en el mismo departamento en el que trabaja <code>Fripp</code>?</em> la mayor&iacute;a, antes de responder, preguntar&iacute;a a su vez <em>&iquest;y en qu&eacute; departamento trabaja <code>Fripp</code>?</em></p><p>Esta &uacute;ltima pregunta ser&iacute;a nuestra subconsulta:</p><blockquote><p><code>SELECT DEPARTMENT_ID<br />FROM employees<br />WHERE LAST_NAME = &#39;Fripp&#39;;</code></p></blockquote><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th></tr><tr><td>50</td></tr></tbody></table><p>Es importante que, de todos los datos de <code>Fripp</code>, &uacute;nicamente nos interesa el valor del atributo DEPARTMENT_ID.</p><p>Una vez que conocemos en qu&eacute; departamento trabaja <code>Fripp</code>, ya podr&iacute;amos consultar los empleados que trabajan en ese departamento:</p><blockquote><p><code>SELECT FIRST_NAME, LAST_NAME, DEPARTMENT_ID<br />FROM employees<br />WHERE DEPARTMENT_ID = 50;</code></p></blockquote><table align="center" border="1" summary="Results from query"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">FIRST_NAME</th><th style="background-color:#9e9e9e; text-align:center">LAST_NAME</th><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th></tr><tr><td>Mozhe</td><td>Atkinson</td><td>50</td></tr><tr><td>Sarah</td><td>Bell</td><td>50</td></tr><tr><td>Laura</td><td>Bissot</td><td>50</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>Pero, podr&iacute;amos haber realizado las 2 consultas anteriores a la vez, sustituyendo el n&uacute;mero 50 de la segunda consulta por la primera consulta, encerrada entre par&eacute;ntesis.</p><blockquote><p><code>SELECT FIRST_NAME, LAST_NAME, DEPARTMENT_ID<br />FROM employees<br />WHERE DEPARTMENT_ID = <strong>(<br />&nbsp;&nbsp;&nbsp; SELECT DEPARTMENT_ID<br />&nbsp;&nbsp;&nbsp; FROM employees<br />&nbsp;&nbsp;&nbsp; WHERE LAST_NAME = &#39;Fripp&#39;<br />)</strong>;</code></p></blockquote><p>La anterior es un ejemplo de subconsulta de devoluci&oacute;n de valores individuales, ya que devuelve un &uacute;nico valor (50), que posteriormente es utilizado por la consulta externa a trav&eacute;s de los operadores relacionales (<code>=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>).</p><h3>Ejercicio:</h3><p>&iquest;Qu&eacute; empleados tienen un salario mayor que el doble de la media de los salarios?</p><p>Ordena el resultado descendentemente por el salario.</p>