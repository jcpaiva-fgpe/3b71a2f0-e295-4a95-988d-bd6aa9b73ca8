<p>As subconsultas podem aparecer dentro das cláusulas <code>WHERE</code>, <code>HAVING</code> ou <code>FROM</code>.</p><p>Começaremos com</ p ><h2>Subconsultas na cláusula <code>WHERE</code> que retornam valores únicos.</h2><h3>Sintaxe</h3><blockquote><p><code>SELECT [<em>atributos</h2> em>]<br />FROM [<em>tabela</em>]<br />WHERE expressão operador <strong>(<br /> SELECT [<em>atributos</em>]<br /> FROM [ <em>tabela</em>]<br /> WHERE [condição]</code><br />)</strong></p></blockquote><p>O que colocamos em negrito corresponderia a a subconsulta.</p><h3>Exemplo:</h3><p>Se perguntarmos, <em>quais funcionários trabalham no mesmo departamento que <code>Fripp</code>?</em> mais , antes de responder, por sua vez, perguntaria <em>e em qual departamento <code>Fripp</code> trabalha?</em></p><p>Esta última pergunta seria nossa subconsulta:</p >< blockquote><p><code>SELECT DEPARTMENT_ID<br />FROM empregados<br />WHERE LAST_NAME = 'Fripp';</code></p></blockquote><table align="center" border="1" summary="Resultados da consulta"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th></tr><tr><td>50</td></tr></tbody></table><p>É importante que, de todos os dados de <code>Fripp</code>, estamos interessados ​​apenas no valor do atributo DEPARTMENT_ID.</p><p>Uma vez que sabemos em qual departamento <code>Fripp</code> trabalha, já podemos consultar os funcionários que trabalham nesse departamento:</p><blockquote><p><code>SELECT FIRST_NAME, LAST_NAME, DEPARTMENT_ID<br />FROM funcionários<br />WHERE DEPARTMENT_ID = 50;</code></p> </blockquote> <table align="center" border="1" summary="Resultados da consulta"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">FIRST_NAME</th><th style="background-color:#9e9e9e; text-align:center">LAST_NAME</th><th style="background-color:#9e9e9e; text-align:center">DEPARTMENT_ID</th></tr><tr><td>Mozhe</td><td>Atkinson</td><td>50</td></tr><tr> <td>Sarah</td><td>Bell</td><td>50</td></tr><tr><td>Laura</td><td>Bissot</td><td> 50</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody> </table><p>Mas poderíamos ter feito as 2 consultas anteriores de uma só vez, substituindo o número 50 da segunda consulta pela primeira consulta, entre parênteses.</p><blockquote><p><code> SELECT FIRST_NAME, LAST_NAME, DEPARTMENT_ID<br />FROM empregados<br />WHERE DEPARTMENT_ID = <strong>(<br /> SELECT DEPARTMENT_ID<br /> FROM empregados<br /> WHERE LAST_NAME = 'Fripp'<br />) </strong>;</code></p></blockquote><p>O exemplo acima é um exemplo de subconsulta para retornar valores individuais, pois retorna um único valor (50), que é posteriormente utilizado pela consulta externo por meio dos operadores relacionais (<code>=</code>, <code>></code>, <code><</code>, <code>!=</code>).</p> <h3 >Exercício:</h3><p>Quais funcionários tem um salário maior que o dobro do salário médio?</p><p>Classifique o resultado de forma decrescente por salário.</p>